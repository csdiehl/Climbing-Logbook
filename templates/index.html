{% extends "layout.html" %}


{% block main %}
<h1>Hello, {{ person }}</h1>

<div class = "row">
    <div id = "indoor-main-stats" class = "col-md-4">

    </div>
    <div id = "form-container" class = "col-md-8">
        <h2>Enter Indoor Climbs</h2>
        <form action = "/homepage" method = "post">
            <input type = "date" placeholder = "date" name = "date">
            <select id = "type-select" name = "type">
                <option value="" disabled selected style="display:none;">Type</option>
                <option value = "lead">Lead</option>
                <option value = "toprope">Toprope</option>
                <option value = "boulder">Boulder</option>
            </select>
            <select id = "grade-select" name = "grade"></select>
            <select name = "send_type">
                <option value = "onsight">Onsight</option>
                <option value = "flash">Flash</option>
                <option value = "redpoint">Redpoint / Send</option>
            </select>
            <input type = "number" name = "num_routes">Number</input>
            <button class = "btn btn-primary" type = "submit">Submit</button>
        </form>
    </div>
</div>

<div class = "row">
    <div class = "col-md-6">
        <canvas id = "chart1"></canvas>
    </div>
    <div class = "col-md-6">
        <canvas id = "chart2"></canvas>
    </div>
</div>

<div class = "row">
    <div class = "col-md-6">
        <canvas id = "chart3"></canvas>
    </div>
    <div class = "col-md-6">
        <canvas id = "chart4"></canvas>
    </div>
</div>

<script type = "text/javascript">

    //send data
    const chartData = {{ chart_data|tojson }};
    const maxData = {{ max_data|tojson }}

    //change select based on type of climb
        const select =  document.getElementById('type-select');
        select.onchange = function() {
            let type = select.value;
            document.getElementById('grade-select').innerHTML = '';

            const grades = ["5.7", "5.8", "5.9", "5.10a", "5.10b", "5.10c", "5.10d", "5.11a", "5.11b", "5.11c", "5.11d", 
            "5.12a", "5.12b", "5.12c", "5.12d", "5.13a", "5.13b"]

            const boulders = ["VB", "V0", "V1", "V2", "V3", "V4", "V5", "V6", "V7", "V8"]

            if (type === "boulder") {
                for(let i = 0; i < boulders.length; i++) {
                    option = document.createElement('option')
                    option.value = boulders[i]
                    option.innerHTML = boulders[i]
                    document.getElementById('grade-select').appendChild(option)
                }
            } else {
                for(let i = 0; i < grades.length; i++) {
                    option = document.createElement('option')
                    option.value = grades[i]
                    option.innerHTML = grades[i]
                    document.getElementById('grade-select').appendChild(option)
                }
            }
        }
    

</script>

<script type = "text/javascript" src = "{{url_for('static', filename = 'indoor_charts.js')}}"></script>

{% endblock %}
